<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>RUINACOIN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { background:#0f0f0f; color:#fff; font-family:Arial, sans-serif; text-align:center; padding:20px; margin:0; }
#playerId { position:fixed; top:10px; left:10px; background:#1a1a1a; padding:8px 12px; border-radius:8px; color:#00ffd5; font-weight:bold; font-size:16px; box-shadow:0 0 10px #00ffd5; z-index:9999; cursor:pointer; }
h1 { font-size:32px; color:#ff00aa; margin-bottom:10px; text-shadow:0 0 10px #ff00aa; }
#score { font-size:24px; margin-bottom:10px; }
#clickPowerDisplay { font-size:20px; color:#00ffd5; margin-bottom:20px; }
.tap-image { width:80%; max-width:300px; height:auto; cursor:pointer; border-radius:20px; box-shadow:0 0 20px #ff00aa; transition:transform .1s ease; }
.tap-image:active { transform:scale(.97); }
.shop { margin-top:30px; }
.shop h2 { font-size:20px; margin-bottom:10px; color:#00ffd5; }
.shop-button { font-size:16px; margin:8px; padding:10px 20px; background:#222; color:#fff; border:2px solid #00ffd5; border-radius:10px; cursor:pointer; transition:all .2s ease; }
.shop-button:hover { background:#333; transform:scale(1.05); }
#message { margin-top:20px; font-size:18px; color:#ffcc00; min-height:24px; white-space:pre-line; }
#skins { display:flex; flex-wrap:wrap; justify-content:center; }
.skin-button { display:inline-block; margin:10px; border:2px solid #00ffd5; border-radius:12px; cursor:pointer; padding:8px; background:#111; transition:all .3s ease; max-width:160px; text-align:center; }
.skin-button:hover { background:#222; transform:scale(1.05); }
.skin-img { max-width:100%; border-radius:10px; display:block; margin:0 auto 6px; box-shadow:0 0 10px #00ffd5; }
.skin-info { color:#00ffd5; font-size:14px; font-weight:bold; }
.selected-badge { display:inline-block; margin-top:6px; padding:4px 8px; background:#00ffd5; color:#000; border-radius:8px; font-weight:bold; font-size:12px; }
.toast { position:fixed; right:20px; bottom:20px; background:#222; color:#fff; padding:8px 12px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,.6); margin-top:8px; }
</style>
</head>
<body>

<div id="playerId">ID: ??????</div>

<h1>RUINACOIN TAP</h1>
<div id="score">RUINA: 0</div>
<div id="clickPowerDisplay">Click Power: +1</div>

<img id="tapButton" src="https://i.postimg.cc/BnNsnqwB/photo-5321361869136590759-y-removebg-preview.png" class="tap-image" alt="tap">

<div class="shop">
<h2>Upgrade Shop</h2>
<button class="shop-button" id="buyUpgradeBtn">Add +1 per click â€” <span id="upgradeCost">50</span> RUINA</button>
<button class="shop-button" id="buyAutoClickBtn">Auto Click (lvl <span id="autoClickLevel">0</span>) â€” <span id="autoClickCost">20000</span> RUINA</button>
</div>

<div class="shop">
<h2>Skin Shop</h2>
<div id="skins"></div>
</div>

<div id="message"></div>

<script>
// ===== FIREBASE OFFLINE SAFE =====
const firebaseEnabled = false;
const db = null;

// ===== PLAYER VALUE STORAGE =====
let ruina = 0;
let baseClick = 1;
let baseAuto = 0;
let upgradeCost = 50;
let autoClickCost = 20000;

let playerID = null;
let selectedSkin = 1;
let purchasedSkins = [1];

let autoInterval=null;
let msgTimeout=null;

// ===== CLICK STATISTICS =====
let totalClicks = 0;

// Next random thresholds
let nextBoostX2 = randomInt(200,500);
let nextBoostX3 = randomInt(600,900);

// Active click multiplier
let activeBoostMultiplier = 1;
let boostTimer = null;

// ===== UTIL =====
function generateID(){ return String(Math.floor(100000+Math.random()*900000)); }
function loadOrCreatePlayerID(){ let id=localStorage.getItem("playerID"); if(!id){id=generateID(); localStorage.setItem("playerID",id);} return id; }

function getBalance(id){ return Number(localStorage.getItem("ruina_"+id)||0); }
function setBalance(id,val){ localStorage.setItem("ruina_"+id, Math.max(0, Math.round(val))); }

function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

function showMsg(text, t=3000){
  const m=document.getElementById("message");
  m.innerText=text;
  if(msgTimeout) clearTimeout(msgTimeout);
  msgTimeout=setTimeout(()=>m.innerText="",t);
}

// ===== SAVE & LOAD =====
function savePlayer(){
  setBalance(playerID, ruina);
  localStorage.setItem(
    "ruinaData_"+playerID,
    JSON.stringify({baseClick,baseAuto,upgradeCost,autoClickCost,selectedSkin,purchasedSkins})
  );
}

function loadPlayer(){
  playerID = loadOrCreatePlayerID();
  document.getElementById("playerId").innerText = "ID: "+playerID;
  ruina = getBalance(playerID)||0;
  updateUI();
}

// ===== UI =====
function updateUI(){
  document.getElementById("score").innerText="RUINA: "+Math.round(ruina);
  document.getElementById("clickPowerDisplay").innerText="Click Power: +"+Math.round(baseClick * activeBoostMultiplier);
  document.getElementById("upgradeCost").innerText=upgradeCost;
  document.getElementById("autoClickLevel").innerText=baseAuto;
  document.getElementById("autoClickCost").innerText=autoClickCost;
}

// ===== BOOST HANDLING =====
function checkRandomBoosts(){

  // === X2 BOOST ===
  if(totalClicks >= nextBoostX2){
    activeBoostMultiplier = 2;
    showMsg("ðŸ”¥ BOOST x2 Ð½Ð° 3 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹!");

    nextBoostX2 = totalClicks + randomInt(200,500);

    if(boostTimer) clearTimeout(boostTimer);

    boostTimer = setTimeout(()=>{
      activeBoostMultiplier=1;
      updateUI();
    }, 180000);
  }

  // === X3 BOOST ===
  if(totalClicks >= nextBoostX3){
    activeBoostMultiplier = 3;
    showMsg("âš¡ BOOST x3 Ð½Ð° 3 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹!");

    nextBoostX3 = totalClicks + randomInt(600,900);

    if(boostTimer) clearTimeout(boostTimer);

    boostTimer = setTimeout(()=>{
      activeBoostMultiplier=1;
      updateUI();
    }, 180000);
  }
}

// ===== CLICK EFFECT =====
function spawnParticles(){
  const btn = document.getElementById("tapButton");
  const clone = document.createElement("img");

  clone.src = btn.src;
  clone.style.position="fixed";
  clone.style.pointerEvents="none";
  clone.style.width=btn.offsetWidth+"px";

  const rect=btn.getBoundingClientRect();
  clone.style.left=rect.left+"px";
  clone.style.top=rect.top+"px";

  document.body.appendChild(clone);

  setTimeout(()=>{
    clone.style.transition="all 0.9s ease";
    clone.style.transform="translate(0,-150px) scale(0.2)";
    clone.style.opacity="0";
    setTimeout(()=>clone.remove(),900);
  },10);
}

// ===== MAIN CLICK =====
function tap(){
  totalClicks++;
  checkRandomBoosts();
  ruina += baseClick * activeBoostMultiplier;
  spawnParticles();
  updateUI();
  savePlayer();
}

document.getElementById("tapButton").addEventListener("click", tap);

// ===== UPGRADES =====
document.getElementById("buyUpgradeBtn").addEventListener("click",()=>{
  if(ruina>=upgradeCost){
    ruina-=upgradeCost;
    baseClick++;
    upgradeCost=Math.floor(upgradeCost*1.5);
    showMsg("Click power upgraded!");
    updateUI();
    savePlayer();
  } else showMsg("Not enough RUINA!");
});

document.getElementById("buyAutoClickBtn").addEventListener("click",()=>{
  if(ruina>=autoClickCost){
    ruina-=autoClickCost;
    baseAuto++;
    autoClickCost=Math.floor(autoClickCost*2);
    showMsg("Auto click upgraded!");
    updateUI();
    savePlayer();
  } else showMsg("Not enough RUINA!");
});

// ===== START =====
loadPlayer();
</script>
</body>
</html>
